<!--
  Generated template for the CommentsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="dark">
    <ion-title>{{ navParams.data.title }}</ion-title>
  </ion-navbar>

</ion-header>


<ion-content #content padding scroll="true">

  <div *ngIf="cards$ | async as card">


    <ng-container *ngIf="card.comments == 0">
      <h2 style="color:#7a7a7a" text-center>No hay comentarios aún</h2>
      <img src="assets/img/nocomments.png" class="bg-no-saved-card">
      <!-- <p style="font-size:15px; font-weight:500" text-center>Empieza a guardar tocando en el corazón</p> -->
    </ng-container>

    <ng-container *ngIf="!comments$">
      <ion-list>

        <ion-item  *ngFor="let comment of card.recentComments">
          <ion-avatar item-start>
            <img [src]="comment.avatar">
          </ion-avatar>
          <h2>{{ comment.name }}</h2>
          <p>{{ comment.content }}</p>
          <p style="font-size: 12px; color:#a0a0a0">
            {{ comment.createdAt | timeAgo }}
          </p>
        </ion-item>
      </ion-list>
    </ng-container>

    <ion-list>
      <ion-item text-wrap *ngFor="let comment of comments$ | async">
        <ion-avatar item-start>
          <img [src]="comment.avatar">
        </ion-avatar>

        <ion-label>
          <h2>{{ comment.name }}</h2>
          <div>
            <p>{{ comment.content }}</p>
            <p text-right style="font-size: 12px; color:#a0a0a0">
              {{ comment.createdAt | timeAgo }}
            </p>
          </div>
        </ion-label>
      </ion-item>
    </ion-list>
  </div>
</ion-content>

<ion-footer>

  <div  *ngIf="cards$ | async as carda">


    <button (tap)="loadMore()" *ngIf="carda.comments > 5 && btnload == true" color="dark" ion-button block> cargar {{ carda.comments }} comentarios</button>
  </div>
  <ion-toolbar>

    <ion-item>
      <ion-textarea  (ionFocus)="scrollTo()" elasticTextArea [(ngModel)]="formValue" (keyup.enter)="addComment()" placeholder='Escribir comentario'></ion-textarea>
    </ion-item>

    <ion-buttons right>
      <button style="font-size:25px" large ion-button clear (click)="addComment()">
        <ion-icon name="send"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>